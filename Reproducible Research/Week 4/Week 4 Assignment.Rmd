---
title: "Week 4 Assignment"
author: "Ken Wood"
date: "8/5/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
### Questions we will be answering in this analysis:

1. Across the United States, which types of events (as indicated in the 
`EVTYPE` variable) are most harmful with respect to population health?

2. Across the United States, which types of events have the greatest economic consequences?

```{r}
knitr::opts_chunk$set(echo = TRUE)

# Load the raw dataset
df <- read.csv("repdata-data-StormData.csv")
```

```{r}
knitr::opts_chunk$set(echo = TRUE)

# Let's look at a few rows of the df...
head(df)
```

```{r}
knitr::opts_chunk$set(echo = TRUE)

# How big is the df?  
dim(df)

# Wow...almost 29 million rows!
```

```{r}
knitr::opts_chunk$set(echo = TRUE)

# Let's sort the df by fatalities and then by injuries
df <- df[order(c(-df$FATALITIES,-df$INJURIES)),]
```

```{r}
knitr::opts_chunk$set(echo = TRUE)

# Delete rows where NAs are in the columns
# harmful_to_health <- df[!with(df,is.na(df$FATALITIES) & is.na(df$INJURIES)),]
df$HARM_TOTAL <- df$FATALITIES+df$INJURIES
harmful_to_health <- df[!is.na(c(df$FATALITIES,df$INJURIES)), ]
```

```{r}
knitr::opts_chunk$set(echo = TRUE)

# What are the different event types in the df?
events <- as.data.frame(table(df$EVTYPE))
names(events) <- c("EVTYPE","Freq")
events <- events[order(-events$Freq),] 
```

```{r}
# To make our analysis manageable, let's remove those events in the df with < 10 occurrences
# events <- events[events$Freq >= 10,]

# Drop the 'Freq' column...
# events$Freq <- NULL
```

